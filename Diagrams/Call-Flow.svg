<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1899.3492622538063" height="634.8008504228181"><desc>title%20Analytics-Engine%20API%20Call%20Flow%0A%0AClient-%3EServer%3ACollect%20API%20Call%20(Very%20Frequent)%0AServer--%3ERedis%20List%3APushes%20to%20Redis%20List%0AServer--%3ERedis%20List%3ACRON%20to%20check%20length%20of%20Redis%20List%0Anote%20over%20Redis%20List%2CBullMQ%3AIf%20Redis%20List%20length%20crosses%20a%20certain%20threshold%2Ftimeout%20expires%20%2C%20publish%20a%20job%20to%20BullMQ.%0ARedis%20List--%3EBullMQ%3AJob%20Published%0ABullMQ%20Worker--%3EBullMQ%3AConsumes%20Job%0ABullMQ%20Worker--%3EDatabase%3AStores%20the%20Log%20%2CEvent%20Specific%20Aggregations%20and%20User%20Specific%20Aggregations.%0AClient-%3EServer%3AFetch%20Analytics%0AServer-%3EDatabase%3AFetch%20Data%20from%20User_Analytics%20%2F%20Event_Analytics%20Table%0AServer-%3EClient%3AResponse%20of%20Analytics%20API</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1899" height="634"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 44.631447682160164 95.73914152281817 L 44.631447682160164 634.8008504228181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.9513739707669 95.73914152281817 L 295.9513739707669 634.8008504228181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 570.0988301666002 95.73914152281817 L 570.0988301666002 634.8008504228181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1156.8203249705066 95.73914152281817 L 1156.8203249705066 634.8008504228181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1298.1617966692697 95.73914152281817 L 1298.1617966692697 634.8008504228181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1842.0800200770173 95.73914152281817 L 1842.0800200770173 634.8008504228181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 51.63409261281818 L 81.09529371432032 51.63409261281818 L 81.09529371432032 95.73914152281817 L 8.167601650000002 95.73914152281817 L 8.167601650000002 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.891297230500008" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 256.6385746915364 51.63409261281818 L 335.2641732499974 51.63409261281818 L 335.2641732499974 95.73914152281817 L 256.6385746915364 95.73914152281817 L 256.6385746915364 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="274.3622702720364" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Server</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 520.1918994176432 51.63409261281818 L 620.0057609155573 51.63409261281818 L 620.0057609155573 95.73914152281817 L 520.1918994176432 95.73914152281817 L 520.1918994176432 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="537.9155949981432" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Redis List</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1115.0665695755536 51.63409261281818 L 1198.5740803654598 51.63409261281818 L 1198.5740803654598 95.73914152281817 L 1115.0665695755536 95.73914152281817 L 1115.0665695755536 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1132.7902651560535" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">BullMQ</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1230.8855040428714 51.63409261281818 L 1365.4380892956683 51.63409261281818 L 1365.4380892956683 95.73914152281817 L 1230.8855040428714 95.73914152281817 L 1230.8855040428714 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1248.6091996233713" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">BullMQ Worker</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1792.9783795502283 51.63409261281818 L 1891.1816606038064 51.63409261281818 L 1891.1816606038064 95.73914152281817 L 1792.9783795502283 95.73914152281817 L 1792.9783795502283 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1810.7020751307282" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Database</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="803.0959625244141" y="24.651306798181814" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Analytics-Engine API Call Flow</text></g><g><rect fill="white" stroke="none" x="63.96143825382681" y="128.4095481228182" width="212.65994514527344" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="66.41171874882681" y="143.1112310928182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Collect API Call (Very Frequent)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 44.631447682160164 149.64531241281819 L 282.50205658710024 149.64531241281819" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(295.9513739707669,149.64531241281819) translate(-295.9513739707669,-149.64531241281819)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 282.3387045541002 142.83897770448485 L 295.9513739707669 149.64531241281819 L 282.3387045541002 156.45164712115152 Z"/></g></g><g><rect fill="white" stroke="none" x="363.7566681923359" y="174.1481173628182" width="138.53686775269531" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="366.2069486873359" y="188.84980033281818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Pushes to Redis List</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.9513739707669 195.3838816528182 L 556.6495127829336 195.3838816528182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(570.0988301666002,195.3838816528182) translate(-570.0988301666002,-195.3838816528182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 556.4861607499336 188.57754694448485 L 570.0988301666002 195.3838816528182 L 556.4861607499336 202.19021636115153 Z"/></g></g><g><rect fill="white" stroke="none" x="315.28136454243355" y="219.8866866028182" width="235.4874750525" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="317.73164503743357" y="234.58836957281818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">CRON to check length of Redis List</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.9513739707669 241.1224508928182 L 556.6495127829336 241.1224508928182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(570.0988301666002,241.1224508928182) translate(-570.0988301666002,-241.1224508928182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 556.4861607499336 234.31611618448486 L 570.0988301666002 241.1224508928182 L 556.4861607499336 247.92878560115153 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 555.3971471966003 265.6252558428182 L 1156.8203249705066 265.6252558428182 L 1171.5220079405067 280.3269388128182 L 1171.5220079405067 303.1962234328182 L 555.3971471966003 303.1962234328182 L 555.3971471966003 265.6252558428182 M 1156.8203249705066 265.6252558428182 L 1156.8203249705066 280.3269388128182 L 1171.5220079405067 280.3269388128182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="578.2664318166003" y="288.4945404628182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If Redis List length crosses a certain threshold/timeout expires , publish a job to BullMQ.</text></g><g><rect fill="white" stroke="none" x="814.9606444246276" y="327.6990283828182" width="96.99786628785156" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="817.4109249196276" y="342.4007113528182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Job Published</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 570.0988301666002 348.9347926728182 L 1143.3710075868398 348.9347926728182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1156.8203249705066,348.9347926728182) translate(-1156.8203249705066,-348.9347926728182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1143.20765555384 342.1284579644849 L 1156.8203249705066 348.9347926728182 L 1143.20765555384 355.74112738115156 Z"/></g></g><g><rect fill="white" stroke="none" x="1176.1503155421733" y="373.4375976228182" width="102.68149055542969" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1178.6005960371733" y="388.1392805928182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Consumes Job</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1298.1617966692697 394.6733619128182 L 1170.2696423541734 394.6733619128182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1156.8203249705066,394.6733619128182) translate(-1156.8203249705066,-394.6733619128182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1170.4329943871733 387.8670272044849 L 1156.8203249705066 394.6733619128182 L 1170.4329943871733 401.47969662115156 Z"/></g></g><g><rect fill="white" stroke="none" x="1317.4917872409364" y="419.1761668628182" width="505.25819648804685" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1319.9420677359365" y="433.8778498328182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Stores the Log ,Event Specific Aggregations and User Specific Aggregations.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1298.1617966692697 440.4119311528182 L 1828.6307026933505 440.4119311528182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(1842.0800200770173,440.4119311528182) translate(-1842.0800200770173,-440.4119311528182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1828.4673506603506 433.6055964444849 L 1842.0800200770173 440.4119311528182 L 1828.4673506603506 447.21826586115156 Z"/></g></g><g><rect fill="white" stroke="none" x="118.14179714054556" y="464.9147361028182" width="104.29922737183594" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="120.59207763554556" y="479.6164190728182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Fetch Analytics</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 44.631447682160164 486.15050039281823 L 282.50205658710024 486.15050039281823" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(295.9513739707669,486.15050039281823) translate(-295.9513739707669,-486.15050039281823)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 282.3387045541002 479.3441656844849 L 295.9513739707669 486.15050039281823 L 282.3387045541002 492.95683510115157 Z"/></g></g><g><rect fill="white" stroke="none" x="885.2770101568219" y="510.65330534281816" width="367.4773432165625" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="887.7272906518219" y="525.3549883128181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Fetch Data from User_Analytics / Event_Analytics Table</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.9513739707669 531.8890696328182 L 1828.6307026933505 531.8890696328182" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1842.0800200770173,531.8890696328182) translate(-1842.0800200770173,-531.8890696328182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1828.4673506603506 525.0827349244848 L 1842.0800200770173 531.8890696328182 L 1828.4673506603506 538.6954043411515 Z"/></g></g><g><rect fill="white" stroke="none" x="81.46679408878775" y="556.3918745828181" width="177.64923347535156" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="83.91707458378775" y="571.0935575528181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Response of Analytics API</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.9513739707669 577.6276388728181 L 58.08076506582683 577.6276388728181" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(44.631447682160164,577.6276388728181) translate(-44.631447682160164,-577.6276388728181)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 58.244117098826834 570.8213041644848 L 44.631447682160164 577.6276388728181 L 58.244117098826834 584.4339735811515 Z"/></g></g></g><g/><g/><g/><g/><g/><g/></g></svg>